{"version":3,"file":"uiroutermodule.es2015.js","sources":["../../../src/lib/uiroutermodule/uirouter.ts","../../../src/lib/uiroutermodule/uirouter.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Transition, TransitionService } from '@uirouter/core';\n\nimport { Subject } from 'rxjs/Subject';\n\nimport { RouterlessTracking, TrackNavigationEnd } from 'ngx-analytics';\nimport { Observable } from 'rxjs/Observable';\n\n/**\n * Track Route changes for applications using UI-Router\n *\n * @link https://ui-router.github.io/ng2/docs/latest/\n *\n * referenced: https://github.com/ui-router/sample-app-angular/blob/9adb533b85c0f0fccef23968489cca0a5ec84654/src/app/util/ga.ts\n */\n\nexport class UIRouterTracking implements RouterlessTracking {\n  constructor(private transitionService: TransitionService) {}\n\n  path(trans: Transition) {\n    return trans.$to().url.format(trans.params());\n  }\n\n  trackLocation(settings): Observable<TrackNavigationEnd> {\n    const subject = new Subject<TrackNavigationEnd>();\n    this.transitionService.onSuccess(\n      {},\n      trans => {\n        return subject.next({ url: this.path(trans) });\n      },\n      {\n        priority: -10000,\n      },\n    );\n    return subject;\n  }\n\n  prepareExternalUrl(url: string): string {\n    return url;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: TransitionService, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n  ModuleWithProviders,\n  NgModule,\n  Provider,\n} from '@angular/core';\n\nimport {\n  NgxAnalytics,\n  NgxAnalyticsOnModule,\n  NgxAnalyticsSettings,\n  ANGULARTICS2_TOKEN,\n  RouterlessTracking,\n} from 'ngx-analytics';\nimport { UIRouterTracking } from './uirouter';\n\n\n\nexport class NgxAnalyticsUirouterModule {\n  static forRoot(\n    providers: Provider[],\n    settings: Partial<NgxAnalyticsSettings> = {},\n  ): ModuleWithProviders {\n    return {\n      ngModule: NgxAnalyticsUirouterModule,\n      providers: [\n        { provide: ANGULARTICS2_TOKEN, useValue: { providers, settings } },\n        NgxAnalytics,\n        { provide: RouterlessTracking, useClass: UIRouterTracking },\n        ...providers,\n      ],\n    };\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [NgxAnalyticsOnModule],\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["Subject"],"mappings":";;;;;AAgBA;IACE,0BAAoB,iBAAoC;QAApC,sBAAiB,GAAjB,iBAAiB,CAAmB;KAAI;IAE5D,+BAAI,GAAJ,UAAK,KAAiB;QACpB,OAAO,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC;KAC/C;IAED,wCAAa,GAAb,UAAc,QAAQ;QAAtB,iBAYC;QAXC,IAAM,OAAO,GAAG,IAAIA,SAAO,EAAsB,CAAC;QAClD,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAC9B,EAAE,EACF,UAAA,KAAK;YACH,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;SAChD,EACD;YACE,QAAQ,EAAE,CAAC,KAAK;SACjB,CACF,CAAC;QACF,OAAO,OAAO,CAAC;KAChB;IAED,6CAAkB,GAAlB,UAAmB,GAAW;QAC5B,OAAO,GAAG,CAAC;KACZ;IACI,2BAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;KACnB,CAAC;IAEK,+BAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,iBAAiB,GAAG;KAC1B,GAAA,CAAC;IACF,uBAAC;CA/BD;;ACCA;IAAA;KAuBC;IAtBQ,kCAAO,GAAd,UACE,SAAqB,EACrB,QAA4C;QAA5C,yBAAA,EAAA,aAA4C;QAE5C,OAAO;YACL,QAAQ,EAAE,0BAA0B;YACpC,SAAS;gBACP,EAAE,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,EAAE,SAAS,WAAA,EAAE,QAAQ,UAAA,EAAE,EAAE;gBAClE,YAAY;gBACZ,EAAE,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,gBAAgB,EAAE;qBACxD,SAAS,CACb;SACF,CAAC;KACH;IACI,qCAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;oBACvB,OAAO,EAAE,CAAC,oBAAoB,CAAC;iBAChC,EAAG,EAAE;KACL,CAAC;IAEK,yCAAc,GAAmE,cAAM,OAAA,EAC7F,GAAA,CAAC;IACF,iCAAC;CAvBD;;;;"}